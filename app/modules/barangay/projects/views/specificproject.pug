extends ../../home/views/navbar.pug

block content
    <link rel="stylesheet" type="text/css" href="/barangay/css/specificproject.css">
    <link rel="stylesheet" type="text/css" href="/barangay/css/applyproject.css">
    <link rel="stylesheet" type="text/css" href="/barangay/css/fileupload.css">

        <!-- page-header -->
        <div class="page-header-projects">
            <div class="container" id="container-header" >
                <div class="row">
                    <div class="page-caption">
                    each project in tbl_project
                        <h1 class="page-title" style="color:#3B5997;">APPLICATION FORM</h1>
                            <h4>
                                value=project.varchar_projectName
                            </h4>
                            <small>
                                value="(" + project.text_projectObjective + ")"
                            </small>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.page-header-->
        <!-- tour-booking -->
        <div class="content" style="padding-top:1.5%;">
            <div class="container">
            <div class="card">
            <div class="card-header"></div>
            <div class="card-body">
                <form id="regForm" method="POST" action="#">
                    //- First Tab "Basic Personal Information"
                    <div class="tab"><h3>BASIC PERSONAL INFORMATION</h3>
                        <div class="tab-upper-field">
                            <h5>Resident's Name:<label style="color:red;">*</label></h5>
                            <div class="form-row">
                                <div class="form-group float-label-control col-md-4">
                                    <label for="">First Name</label>
                                    <input type="text" name ="apply_fname"class="form-control" placeholder="First Name" required>
                                </div>
                                <div class="form-group float-label-control col-md-4">
                                    <label for="">Last Name</label>
                                    <input type="text" name ="apply_lname"class="form-control" placeholder="Last Name" required>
                                </div>
                                <div class="form-group float-label-control col-md-4">
                                    <label for="">Middle Name</label>
                                    <input type="text" name ="apply_mname"class="form-control" placeholder="Middle Name">
                                </div>
                            </div>
                            <div class="form-row">
                                <h5>Birthdate:<label style="color:red;">*</label></h5>
                                    <div class="form-group float-label-control col-md-4">
                                        <input type="date" name="apply_birthdate" class="form-control" placeholder="Birthdate">
                                    </div>
                                <h5 style="margin-left:4%;margin-right:0.5%;width:83px;">Birthplace:</h5>
                                    <div class="form-group float-label-control col-md-5">
                                        <input type="text" name="apply_birthplace" class="form-control" placeholder="(ex. Manila City)">
                                    </div>
                            </div>
                            <div class="form-row">
                                <h5 style="margin-right:7%;">Gender:<label style="color:red;">*</label></h5>
                                    <div class="form-check form-check-inline">
                                        <label class="form-check-label">
                                            <input class="form-check-input" type="radio" name="apply_gender" id="inlineRadio1" value="option1"> Male
                                        </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <label class="form-check-label">
                                            <input class="form-check-input" type="radio" name="apply_gender" id="inlineRadio2" value="option2"> Female
                                        </label>
                                    </div>
                                <h5 style="margin-left:14%;">Year of Residency:<label style="color:red;">*</label></h5>
                                    <div class="form-group float-label-control col-md-5">
                                        <input type="text" name="apply_yrres" class="form-control" placeholder="(ex. 20xx, 2010)">
                                    </div>
                            </div>
                            <div class="form-row">
                                <h5>Mobile Number:<label style="color:red;">*</label></h5>
                                    <div class="form-group float-label-control col-md-3">
                                        <input type="text" name="apply_contact" class="form-control" placeholder="(ex. 0915xxxxxxx)">
                                    </div>
                                <h5 style="margin-left:7.5%;">Civil Status:<label style="color:red;">*</label></h5>
                                    <div class="col-md-5">
                                        <select class="form-control" id="civilstatus" name="apply_civilstat">
                                            <option>Single</option>
                                            <option>Married</option>
                                            <option>Widowed</option>
                                        </select>
                                    </div>
                            </div>
                        </div>
                    </div>
                    //- End of 1st tab

                    //- Second Tab "Applicant's Address Information"
                    <div class="tab"><h3>APPLICANT'S ADDRESS INFORMATION</h3>
                        <div class="tab-upper-field">
                            <div class="form-row">
                            <h5 style="margin-right:0.5%;">Block Lot:<label style="color:red;">*</label></h5>
                                <div class="form-group float-label-control col-md-3">
                                    <input type="text" name="apply_address1" class="form-control" placeholder="Block Number/Building Number/Lot Number" required>
                                </div>
                            <h5 style="margin-left:1%;margin-right:0.5%;">Street:<label style="color:red;">*</label></h5>
                            <div class="form-group float-label-control col-md-3">
                                    <input type="text" name="apply_address2" class="form-control" placeholder="Street Name/Avenue/Road" required>
                            </div>
                            <h5 style="margin-left:1%;">Province:</h5>
                                <div class="form-group float-label-control col-md-3">
                                    <input type="text" name="apply_province" class="form-control" placeholder="Applicant's Province">
                                </div>
                            <h5 style="margin-right:2%;">Address Type:<label style="color:red;">*</label></h5>
                                    <div class="form-check form-check-inline">
                                        <label class="form-check-label">
                                            <input class="form-check-input" type="radio" value="Permanent" name="apply_addresstype" id="inlineRadio1" value="option1"> Permanent
                                        </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <label class="form-check-label">
                                            <input class="form-check-input" type="radio" value="Temporary" name="apply_addresstype" id="inlineRadio2" value="option2"> Temporary
                                        </label>
                                    </div>
                            </div>
                            </div>
                        </div>
                    </div>
                    //- End of 2nd tab

                    //- SCRIPT FOR ADDITIONAL FORMS
                    script(src="/barangay/projects/routes.js")
                    script.
                        window.onload = function additionalForms(){

                        var int_categoryID = #{int_categoryID.int_categoryID}
                        var int_formtypeID = !{JSON.stringify(int_formtypeID)}

                            console.log("=======IF STATEMENTS========")
                            for (var i=0; i < int_formtypeID.length; i++) {
                                if(int_formtypeID[i].int_formtypeID == 1){
                                    console.log("Form Type - 1 (Medical)");
                                    document.getElementById("add-medical").style.display ="inline";
                                }
                                if (int_formtypeID[i].int_formtypeID == 2){
                                    console.log("Form Type - 2 (Account)");
                                    document.getElementById("add-account").style.display ="inline";
                                }
                                if (int_formtypeID[i].int_formtypeID == 3){
                                    console.log("Form Type - 3 (Family)");
                                    document.getElementById("add-family").style.display ="inline";
                                }
                                if (int_formtypeID[i].int_formtypeID == 4){
                                    console.log("Form Type - 4 (Educational)");
                                    document.getElementById("add-educational").style.display ="inline";
                                }
                                if (int_formtypeID[i].int_formtypeID == 5){
                                    console.log("Form Type - 5 (Income)");
                                    document.getElementById("add-income").style.display ="inline";
                                }
                                if (int_formtypeID[i].int_formtypeID == 6){
                                    console.log("Form Type - 6 (Professional)");
                                    document.getElementById("add-professional").style.display ="inline";
                                }
                            }
                        }
                    //- END OF SCRIPT FOR ADDITIONAL FORMS

                    //- ADDITIONAL TABS:

                    <div class="tab" style="display:none;">

                        //- MEDICAL FORM (1)
                        <span id="add-medical" style="display:none;"><h3>Health/Medical Form</h3>
                        <div class="tab-upper-field">
                            <div class="form-row">
                            <h5 style="margin-right:0.5%;">Medication:<label style="color:red;">*</label></h5>
                                <div class="form-group col-md-4">
                                    <input type="textarea" name="apply_medication" class="form-control" placeholder="Medication ..." required>
                                </div>
                            <h5 style="margin-left:0.5%;margin-right:0.5%;">Medication Description:<label style="color:red;">*</label></h5>
                            <div class="form-group col-md-4">
                                    <input type="textarea" name="apply_medicationdesc" class="form-control" placeholder="Medication description ..." required>
                            </div>
                            </div>
                        </div>         
                        </span>
                        //- END OF 1ST ADDITIONAL FORM

                        //- ACCOUNT DETAILS (2)
                        <span id="add-account" style="display:none;"><h3>Account Form</h3>
                        <div class="tab-upper-field">
                            <div class="form-row">
                            <h5 style="margin-right:0.5%;">Income Source:<label style="color:red;">*</label></h5>
                                <div class="form-group col-md-2">
                                    <input type="text" name="apply_incomesource" class="form-control" placeholder="Income source ..." required>
                                </div>
                            <h5 style="margin-left:0.5%;margin-right:0.5%;">Income Maker:<label style="color:red;">*</label></h5>
                            <div class="form-group col-md-2">
                                    <input type="text" name="apply_incomemaker" class="form-control" placeholder="Income maker ..." required>
                            </div>
                            <h5 style="margin-left:0.5%;margin-right:0.5%;">Income of Spouse:<label style="color:red;">*</label></h5>
                            <div class="form-group col-md-2">
                                    <input type="text" name="apply_spouseincomer" class="form-control" placeholder="Income of Spouse ..." required>
                            </div>
                            </div>
                        </div>      
                        </span>
                        //- END OF 2ND ADDITIONAL FORM

                        //- FAMILY BACKGROUND (3)
                        <span id="add-family" style="display:none;"><h3>Family Background Form</h3>
                        <div class="tab-upper-field">
                            <h5>Relative's Name:<label style="color:red;">*</label></h5>
                            <div class="form-row">
                                <div class="form-group float-label-control col-md-4">
                                    <label for="">First Name</label>
                                    <input type="text" name ="family_fname"class="form-control" placeholder="First Name" required>
                                </div>
                                <div class="form-group float-label-control col-md-4">
                                    <label for="">Last Name</label>
                                    <input type="text" name ="family_lname"class="form-control" placeholder="Last Name" required>
                                </div>
                                <div class="form-group float-label-control col-md-4">
                                    <label for="">Middle Name</label>
                                    <input type="text" name ="family_mname"class="form-control" placeholder="Middle Name">
                                </div>
                            </div>
                            <div class="form-row">
                                <h5>Relative's Birthdate:<label style="color:red;">*</label></h5>
                                    <div class="form-group float-label-control col-md-4">
                                        <input type="date" name="family_birthdate" class="form-control" placeholder="Birthdate">
                                    </div>
                                <h5>Educational Attainment:(Highest)<label style="color:red;">*</label></h5>
                                    <div class="form-group float-label-control col-md-3">
                                        <input type="text" name="family_educattainment" class="form-control" placeholder="(ex: College, Highschool, etc ...)">
                                    </div>
                            </div>
                            <div class="form-row">
                                <h5 >Relationship to Applicant:<label style="color:red;">*</label></h5>
                                    <div class="col-md-4">
                                        <select class="form-control" name="family_relationship">
                                            <option value = "Mother">Mother</option>
                                            <option value = "Father">Father</option>
                                            <option value = "Sister">Sister</option>
                                            <option value = "Brother">Brother</option>
                                            <option value = "Aunt">Aunt</option>
                                            <option value = "Uncle">Uncle</option>
                                            <option value = "Cousin">Cousin</option>
                                            <option value = "Son">Son</option>
                                            <option value = "Daughter">Daughter</option>
                                            <option value = "Spouse">Spouse</option>
                                            <option value = "Nephew">Nephew</option>
                                            <option value = "Niece">Niece</option>
                                            <option value = "Grandchild">Grandchild</option>
                                            <option value = "Grandparent">Grandparent</option>
                                        </select>
                                    </div>   
                            </div>
                        </div>
                        </span>        
                        //-END OF FAMILY BG FORM 

                        //- EDUCATIONAL BACKGROUND (4)
                        <span id="add-educational" style="display:none;"><h3>Educational Background</h3>
                        <div class="tab-upper-field">
                            <div class="form-row">
                            <h5 style="margin-right:0.5%;">Income Source:<label style="color:red;">*</label></h5>
                                <div class="form-group col-md-2">
                                    <input type="text" name="apply_incomesource" class="form-control" placeholder="Income source ..." required>
                                </div>
                            <h5 style="margin-left:0.5%;margin-right:0.5%;">Income Maker:<label style="color:red;">*</label></h5>
                            <div class="form-group col-md-2">
                                    <input type="text" name="apply_incomemaker" class="form-control" placeholder="Income maker ..." required>
                            </div>
                            <h5 style="margin-left:0.5%;margin-right:0.5%;">Income of Spouse:<label style="color:red;">*</label></h5>
                            <div class="form-group col-md-2">
                                    <input type="text" name="apply_spouseincomer" class="form-control" placeholder="Income of Spouse ..." required>
                            </div>
                            </div>
                        </div>      
                        </span>
                        //- END OF EDUCATIONAL BACKGROUND

                        //- INCOME DETAILS (5)
                        <span id="add-income" style="display:none;"><h3>Income Details</h3>
                        <div class="tab-upper-field">
                            <div class="form-row">
                            <h5 style="margin-right:0.5%;">Income Source:<label style="color:red;">*</label></h5>
                                <div class="form-group col-md-2">
                                    <input type="text" name="apply_incomesource" class="form-control" placeholder="Income source ..." required>
                                </div>
                            <h5 style="margin-left:0.5%;margin-right:0.5%;">Income Maker:<label style="color:red;">*</label></h5>
                            <div class="form-group col-md-2">
                                    <input type="text" name="apply_incomemaker" class="form-control" placeholder="Income maker ..." required>
                            </div>
                            <h5 style="margin-left:0.5%;margin-right:0.5%;">Income of Spouse:<label style="color:red;">*</label></h5>
                            <div class="form-group col-md-2">
                                    <input type="text" name="apply_spouseincomer" class="form-control" placeholder="Income of Spouse ..." required>
                            </div>
                            </div>
                        </div>      
                        </span>
                        //- END OF INCOME DETAILS

                        //- PROFESSIONAL BACKGROUND (6)
                        <span id="add-professional" style="display:none;"><h3>Professional Background</h3>
                        <div class="tab-upper-field">
                            <div class="form-row">
                            <h5 style="margin-right:0.5%;">Income Source:<label style="color:red;">*</label></h5>
                                <div class="form-group col-md-2">
                                    <input type="text" name="apply_incomesource" class="form-control" placeholder="Income source ..." required>
                                </div>
                            <h5 style="margin-left:0.5%;margin-right:0.5%;">Income Maker:<label style="color:red;">*</label></h5>
                            <div class="form-group col-md-2">
                                    <input type="text" name="apply_incomemaker" class="form-control" placeholder="Income maker ..." required>
                            </div>
                            <h5 style="margin-left:0.5%;margin-right:0.5%;">Income of Spouse:<label style="color:red;">*</label></h5>
                            <div class="form-group col-md-2">
                                    <input type="text" name="apply_spouseincomer" class="form-control" placeholder="Income of Spouse ..." required>
                            </div>
                            </div>
                        </div>      
                        </span>
                        //- END OF PROFESSIONAL BACKGROUND
                    </div>
                    //- END OF ADDITIONAL TABS(AS OF NOW PER DIV)

                    <div style="overflow:auto;">
                    <div style="float:right;">
                        <button type="button" id="prevBtn" class="btn btn-outline-info float-right" style="border-color:#3B5997;margin-right:8%;margin-bottom:5%;" onclick="nextPrev(-1)">Previous</button>
                        <button type="button" id="nextBtn" class="btn btn-outline-info float-right" style="border-color:#3B5997;margin-right:8%;width:100px;" onclick="nextPrev(1)">Next</button>
                    </div>
                    </div>

                    <!-- Circles which indicates the steps of the form: -->
                    <div style="text-align:center;margin-top:40px;">
                    <span class="step"></span>
                    <span class="step"></span>
                    <span class="step"></span>
                    <span class="step"></span>
                    </div>

                </form>
            </div>
            </div>
        </div>
        <!-- /.tour-booking -->

    script.

        var currentTab = 0; // Current tab is set to be the first tab (0)
        showTab(currentTab); // Display the current tab

        function showTab(n) {
        // This function will display the specified tab of the form ...
        var x = document.getElementsByClassName("tab");
        x[n].style.display = "block";
        // ... and fix the Previous/Next buttons:
        if (n == 0) {
            document.getElementById("prevBtn").style.display = "none";
        } else {
            document.getElementById("prevBtn").style.display = "inline";
        }
        if (n == (x.length - 1)) {
            document.getElementById("nextBtn").innerHTML = "Submit";
        } else {
            document.getElementById("nextBtn").innerHTML = "Next";
        }
        // ... and run a function that displays the correct step indicator:
        fixStepIndicator(n)
        }

        function nextPrev(n) {
        // This function will figure out which tab to display
        var x = document.getElementsByClassName("tab");
        // Exit the function if any field in the current tab is invalid:
        if (n == 1 && !validateForm()) return false;
        // Hide the current tab:
        x[currentTab].style.display = "none";
        // Increase or decrease the current tab by 1:
        currentTab = currentTab + n;
        // if you have reached the end of the form... :
        if (currentTab >= x.length) {
            //...the form gets submitted:
            document.getElementById("regForm").submit();
            return false;
        }
        // Otherwise, display the correct tab:
        showTab(currentTab);
        }

        function validateForm() {
        // This function deals with validation of the form fields
        var x, y, i, valid = true;
        x = document.getElementsByClassName("tab");
        y = x[currentTab].getElementsByTagName("");
        // A loop that checks every input field in the current tab:
        for (i = 0; i < y.length; i++) {
            // If a field is empty...
            if (y[i].value == "") {
            // add an "invalid" class to the field:
            y[i].className += " invalid";
            // and set the current valid status to false:
            valid = false;
            }
        }
        // If the valid status is true, mark the step as finished and valid:
        if (valid) {
            document.getElementsByClassName("step")[currentTab].className += " finish";
        }
        return valid; // return the valid status
        }

        function fixStepIndicator(n) {
        // This function removes the "active" class of all steps...
        var i, x = document.getElementsByClassName("step");
        for (i = 0; i < x.length; i++) {
            x[i].className = x[i].className.replace(" active", "");
        }
        //... and adds the "active" class to the current step:
        x[n].className += " active";
        }


        //- SCRIPT FOR LABEL
        (function ($) {
            $.fn.floatLabels = function (options) {

                // Settings
                var self = this;
                var settings = $.extend({}, options);


                // Event Handlers
                function registerEventHandlers() {
                    self.on('input keyup change', 'input, textarea', function () {
                        actions.swapLabels(this);
                    });
                }


                // Actions
                var actions = {
                    initialize: function() {
                        self.each(function () {
                            var $this = $(this);
                            var $label = $this.children('label');
                            var $field = $this.find('input,textarea').first();

                            if ($this.children().first().is('label')) {
                                $this.children().first().remove();
                                $this.append($label);
                            }

                            var placeholderText = ($field.attr('placeholder') && $field.attr('placeholder') != $label.text()) ? $field.attr('placeholder') : $label.text();

                            $label.data('placeholder-text', placeholderText);
                            $label.data('original-text', $label.text());

                            if ($field.val() == '') {
                                $field.addClass('empty')
                            }
                        });
                    },
                    swapLabels: function (field) {
                        var $field = $(field);
                        var $label = $(field).siblings('label').first();
                        var isEmpty = Boolean($field.val());

                        if (isEmpty) {
                            $field.removeClass('empty');
                            $label.text($label.data('original-text'));
                        }
                        else {
                            $field.addClass('empty');
                            $label.text($label.data('placeholder-text'));
                        }
                    }
                }


                // Initialization
                function init() {
                    registerEventHandlers();

                    actions.initialize();
                    self.each(function () {
                        actions.swapLabels($(this).find('input,textarea').first());
                    });
                }
                init();


                return this;
            };

            $(function () {
                $('.float-label-control').floatLabels();
            });
        })(jQuery);

        //- END OF SCRIPT FOR LABEL

        


        