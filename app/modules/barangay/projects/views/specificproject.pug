extends ../../home/views/navbar.pug

block content
    <link rel="stylesheet" type="text/css" href="/barangay/css/specificproject.css">
    <div class="right_col" role="main">

    <div class ="container">
    <div class="card">
    each project in tbl_project
        <div class="card-header">
            <center>
                <h1>APPLICATION FORM</h1>
                <h4>
                    value=project.varchar_projectName
                </h4>
                <small>
                    value="(" + project.text_projectObjective + ")"
                </small>
            </center>
        </div>
        <div class="card-body card-block">
        <form id="regForm" action="" method="POST" class="">

            //- FIRST TAB
            <div class="tab"><h3>BASIC PERSONAL INFORMATION</h3>
                <div class="form-row">
                    <div class="form-group col-md-4">
                        <label for="ap-fname" class="form-control-label"><strong>First</strong> Name</label>
                            <input type="text" id="ap-fname" name="apply_fname" placeholder="Applicant's First name ..." class="names col-sm-11 form-control ">
                    </div>
                    <div class="form-group col-md-4">
                        <label for="ap-lname" class="form-control-label"><strong>Last</strong> Name</label>
                            <input type="text" id="ap-lname" name="apply_lname" placeholder="Applicant's Last name ..." class="names col-sm-11 form-control ">
                    </div>
                    <div class="form-group col-md-4">
                        <label for="ap-mname" class="form-control-label"><strong>Middle</strong> Name</label>
                            <input type="text" id="ap-mname" name="apply_mname" placeholder="Applicant's Middle name ..." class="middle col-sm-11 form-control ">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-1">
        
                    </div>
                    <div class="form-group col-md-3">
                        <label for="ap-birthdate" class="form-control-label"><strong>Birthdate</strong></label>
                            <input type="date" id="ap-birthdate" name="apply_birthdate" placeholder="Birthdate" class="col-sm-11 form-control ">
                    </div>
                    <div class="form-group col-md-3">
                        <label for="ap-number" class="form-control-label"><strong>Contact Number</strong></label>
                            <input type="text" id="ap-number" name="apply_contact" placeholder="(ex: 0912xxxxxxx)" class="col-sm-11 form-control ">
                    </div>
                    <div class="form-group col-md-5">
                        <label for="ap-email" class="form-control-label"><strong>Email Address</strong></label>
                            <input type="email" id="ap-email" name="apply_emailaddress" placeholder="(ex: abc@gmail.com)" class="col-sm-11 form-control ">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-1">
        
                    </div>
                    <div class="form-group col-md-3">
                    <label for="ap-gender" class="form-control-label"><strong>Gender</strong></label>
                        <div class="form-check form-check-inline" id="ap-gender">
                            <label class="form-check-label">
                                <input class="form-check-input" type="radio" value="Male" name="apply_gender" id="inlineRadio1"> Male
                            </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                                <input class="form-check-input" type="radio" value="Female" name="apply_gender" id="inlineRadio2"> Female
                            </label>
                        </div>
                    </div>
                    <div class="form-group col-md-3">
                        <label for="ap-yrres" class="form-control-label"><strong>Year of Residency</strong></label>
                            <input type="text" id="ap-yrres" name="apply_yrres" placeholder="(ex. 20xx, 2010)" class="col-sm-11 form-control ">
                    </div>
                    <div class="form-group col-md-4">
                        <label for="ap-civilstat" class="form-control-label"><strong>Civil Status</strong></label>
                        <select class="form-control" id="ap-civilstat" name="apply_civilstat">
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                            <option value="Widowed">Widowed</option>
                        </select>
                    </div>
                </div>
            </div>
            //- END OF FIRST TAB

            //- START OF 2ND TAB
            <div class="tab" id="addresstab"><h3>APPLICANT'S ADDRESS INFORMATION</h3>
                <div class="form-row">
                    <div class="form-group col-md-4">
                        <label for="ap-address1" class="form-control-label"><strong>Block Lot</strong></label>
                            <input type="text" id="ap-address1" name="apply_address1" placeholder="Building Number/Lot Number" class="col-sm-11 form-control ">
                    </div>
                    <div class="form-group col-md-4">
                        <label for="ap-address2" class="form-control-label"><strong>Street</strong></label>
                            <input type="text" id="ap-address2" name="apply_address2" placeholder="Street Name/Avenue/Road" class="col-sm-11 form-control ">
                    </div>
                    <div class="form-group col-md-4">
                        <label for="ap-province" class="form-control-label"><strong>Province</strong></label>
                            <input type="text" id="ap-province" name="apply_province" placeholder="Applicant's Province" class="col-sm-11 form-control ">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-3">
                    <label for="ap-addresstype" class="form-control-label"><strong>Address Type:</strong></label>
                        <div class="form-check form-check-inline" id="ap-addresstype">
                            <label class="form-check-label">
                                <input class="form-check-input" type="radio" value="Permanent" name="apply_addresstype" id="inlineRadio1"> Permanent
                            </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                                <input class="form-check-input" type="radio" value="Temporary" name="apply_addresstype" id="inlineRadio2"> Temporary
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            //- END OF 2ND TAB

            //- SCRIPT FOR ADDITIONAL FORMS
            script(src="/barangay/projects/routes.js")
            script.
                window.onload = function additionalForms(){

                var int_categoryID = #{int_categoryID.int_categoryID}
                var int_formtypeID = !{JSON.stringify(int_formtypeID)}

                    console.log("=======IF STATEMENTS========")
                    for (var i=0; i < int_formtypeID.length; i++) {
                        if(int_formtypeID[i].int_formtypeID == 1){
                            console.log("Form Type - 1 (Medical)");
                            document.getElementById("add-medical").style.display ="inline";
                        }
                        if (int_formtypeID[i].int_formtypeID == 2){
                            console.log("Form Type - 2 (Account)");
                            document.getElementById("add-account").style.display ="inline";
                        }
                        if (int_formtypeID[i].int_formtypeID == 3){
                            console.log("Form Type - 3 (Family)");
                            document.getElementById("add-family").style.display ="inline";
                        }
                        if (int_formtypeID[i].int_formtypeID == 4){
                            console.log("Form Type - 4 (Educational)");
                            document.getElementById("add-educational").style.display ="inline";
                        }
                        if (int_formtypeID[i].int_formtypeID == 5){
                            console.log("Form Type - 5 (Income)");
                            document.getElementById("add-income").style.display ="inline";
                        }
                        if (int_formtypeID[i].int_formtypeID == 6){
                            console.log("Form Type - 6 (Professional)");
                            document.getElementById("add-professional").style.display ="inline";
                        }
                    }
                }
            //- END OF SCRIPT FOR ADDITIONAL FORMS

            //- ADDITIONAL FORMS
            <div class="tab" style="display:none;">

                        //- MEDICAL FORM (1)
                        <span id="add-medical" style="display:none;"><h3>HEALTH / MEDICAL FORM</h3>
                            <div class="form-row">
                            <div class="col-md-1">
                            </div>
                            <div class="form-group col-md-11">
                                <label for="ap-med" class="form-control-label"><strong>Medication</strong></label>
                                    <input type="textarea" id="ap-med" name="apply_medication" placeholder="Medication ..." class="col-sm-11 form-control ">
                            </div>
                            </div>
                            <div class="form-row">
                            <div class="col-md-1">
                            </div>
                            <div class="form-group col-md-11">
                                <label for="ap-meddesc" class="form-control-label"><strong>Medication Description</strong></label>
                                    <textarea rows="4" id="ap-meddesc" name="apply_medicationdesc" placeholder="Medication description..." class="col-sm-11 form-control "></textarea>
                            </div>
                            </div>       
                        </span>
                        //- END OF 1ST ADDITIONAL FORM

                        //- ACCOUNT DETAILS (2)
                        <span id="add-account" style="display:none;"><h3>ACCOUNT FORM</h3>
                            <div class="form-row">
                            <div class="col-md-1">
                            </div>
                            <div class="form-group col-md-3">
                                <label for="ap-gsis" class="form-control-label"><strong>GSIS Number:</strong></label>
                                    <input type="number" id="ap-gsis" name="apply_gsis" placeholder="GSIS Number" class="col-sm-11 form-control ">
                            </div>
                            <div class="form-group col-md-3">
                                <label for="ap-sss" class="form-control-label"><strong>SSS Number:</strong></label>
                                    <input type="number" id="ap-sss" name="apply_sss" placeholder="SSS Number" class="col-sm-11 form-control ">
                            </div>
                            </div>   
                            <div class="form-row">
                            <div class="col-md-1">
                            </div>
                            <div class="form-group col-md-3">
                                <label for="ap-tin" class="form-control-label"><strong>TIN Number:</strong></label>
                                    <input type="number" id="ap-tin" name="apply_tin" placeholder="TIN Number" class="col-sm-11 form-control ">
                            </div>
                            <div class="form-group col-md-3">
                                <label for="ap-crn" class="form-control-label"><strong>CRN Number:</strong></label>
                                    <input type="number" id="ap-crn" name="apply_sss" placeholder="CRN Number" class="col-sm-11 form-control ">
                            </div>
                            </div> 
                            <div class="form-row">
                            <div class="col-md-1">
                            </div>
                            <div class="form-group col-md-3">
                                <label for="ap-philhealth" class="form-control-label"><strong>PhilHealth Number:</strong></label>
                                    <input type="number" id="ap-philhealth" name="apply_philhealth" placeholder="PhilHealth Number" class="col-sm-11 form-control ">
                            </div>
                            <div class="form-group col-md-3">
                                <label for="ap-hdmf" class="form-control-label"><strong>HDMF Number:</strong></label>
                                    <input type="number" id="ap-hdmf" name="apply_hdmf" placeholder="HDMF Number" class="col-sm-11 form-control ">
                            </div>
                            </div>     
                        </span>
                        //- END OF 2ND ADDITIONAL FORM

                        //- FAMILY BACKGROUND (3)
                        <span id="add-family" style="display:none;"><h3>FAMILY BACKGROUND FORM</h3>
                            <div class="form-row">
                                <div class="form-group col-md-4">
                                    <label for="rel-fname" class="form-control-label"><strong>Relative's First</strong> Name</label>
                                        <input type="text" id="rel-fname" name="family_fname" placeholder="Relative's First name ..." class="col-sm-11 form-control ">
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="rel-lname" class="form-control-label"><strong>Relative's Last</strong> Name</label>
                                        <input type="text" id="rel-lname" name="family_lname" placeholder="Relative's Last name ..." class="col-sm-11 form-control ">
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="rel-mname" class="form-control-label"><strong>Relative's Middle</strong> Name</label>
                                        <input type="text" id="rel-mname" name="family_mname" placeholder="Relative's Middle name ..." class="col-sm-11 form-control ">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-3">
                                    <label for="rel-birthdate" class="form-control-label"><strong>Relative's Birthdate</strong></label>
                                        <input type="date" id="rel-birthdate" name="family_birthdate" placeholder="Birthdate" class="col-sm-11 form-control ">
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="rel-educ" class="form-control-label"><strong>Educational Attainment:(Highest)</strong></label>
                                        <input type="text" id="rel-educ" name="family_educattainment" placeholder="(ex: College, Highschool, etc ...)" class="col-sm-11 form-control ">
                                </div>
                                <div class="form-group col-md-3">
                                    <label for="rel-relationship" class="form-control-label"><strong>Relationship to Applicant</strong></label>
                                        <select class="form-control" name="family_relationship">
                                            <option value = "Mother">Mother</option>
                                            <option value = "Father">Father</option>
                                            <option value = "Sister">Sister</option>
                                            <option value = "Brother">Brother</option>
                                            <option value = "Aunt">Aunt</option>
                                            <option value = "Uncle">Uncle</option>
                                            <option value = "Cousin">Cousin</option>
                                            <option value = "Son">Son</option>
                                            <option value = "Daughter">Daughter</option>
                                            <option value = "Spouse">Spouse</option>
                                            <option value = "Nephew">Nephew</option>
                                            <option value = "Niece">Niece</option>
                                            <option value = "Grandchild">Grandchild</option>
                                            <option value = "Grandparent">Grandparent</option>
                                        </select>
                                </div>
                            </div>
                        </span>        
                        //-END OF FAMILY BG FORM 

                        //- EDUCATIONAL BACKGROUND (4)
                        <span id="add-educational" style="display:none;"><h3>EDUCATIONAL BACKGROUND</h3>
                        <div class="form-row">
                            <div class="form-group col-md-3">
                                    <label for="educ-schoolname" class="form-control-label"><strong>School Name</strong></label>
                                        <input type="text" id="educ-schoolname" name="school_name" placeholder="School Name ..." class="col-sm-11 form-control ">
                            </div>
                            <div class="form-group col-md-3">
                                    <label for="educ-schoolyear" class="form-control-label"><strong>School Year</strong></label>
                                        <input type="text" id="educ-schoolyear" name="school_year" placeholder="(ex: 2015 - 2019)" class="col-sm-11 form-control ">
                            </div>
                        </div>      
                        <div class="row">
                                <div class="form-group col-md-4">
                                    <label for="educ-address1" class="form-control-label"><strong>Block Lot</strong></label>
                                        <input type="text" id="educ-address1" name="educ_address1" placeholder="Building Number/Lot Number" class="col-sm-11 form-control ">
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="educ-address2" class="form-control-label"><strong>Street</strong></label>
                                        <input type="text" id="educ-address2" name="educ_address2" placeholder="Street Name/Avenue/Road" class="col-sm-11 form-control ">
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="educ-cityname" class="form-control-label"><strong>City</strong></label>
                                        <input type="text" id="ap-province" name="educ_cityname" placeholder="City" class="col-sm-11 form-control ">
                                </div>
                        </div>
                        </span>
                        //- END OF EDUCATIONAL BACKGROUND

                        //- INCOME DETAILS (5)
                        <span id="add-income" style="display:none;"><h3>INCOME DETAILS</h3>
                        <div class="form-row">
                            <div class="form-group col-md-4">
                                <label for="ap-insource" class="form-control-label"><strong>Income Source</strong></label>
                                    <input type="text" id="ap-insource" name="apply_incomesource" placeholder="Income Source" class="col-sm-11 form-control ">
                            </div>
                            <div class="form-group col-md-4">
                                <label for="ap-inmaker" class="form-control-label"><strong>Income Maker</strong></label>
                                    <input type="text" id="ap-inmaker" name="apply_incomemaker" placeholder="Income Maker" class="col-sm-11 form-control ">
                            </div>
                            <div class="form-group col-md-4">
                                <label for="ap-inspouse" class="form-control-label"><strong>Income of Spouse</strong></label>
                                    <input type="text" id="ap-inspouse" name="apply_incomespouse" placeholder="Income of Spouse" class="col-sm-11 form-control ">
                            </div>
                        </div> 
                        </span>
                        //- END OF INCOME DETAILS

                        //- PROFESSIONAL BACKGROUND (6)
                        <span id="add-professional" style="display:none;"><h3>PROFESSIONAL BACKGROUND</h3>
                            <div class="form-row">
                            <div class="form-group col-md-5">
                                <label for="prof-position" class="form-control-label"><strong>Position</strong></label>
                                    <input type="text" id="prof-position" name="prof_position" placeholder="Position in Work" class="col-sm-11 form-control ">
                            </div>
                            <div class="form-group col-md-7">
                                <label for="prof-company" class="form-control-label"><strong>Company Name</strong></label>
                                    <input type="text" id="prof-company" name="prof_companyname" placeholder="Company Name" class="col-sm-11 form-control ">
                            </div>
                            </div>   
                            <div class="form-row">
                                <div class="form-row">
                                <div class="form-group col-md-2"><strong>Company Address:</strong>
                                </div>
                                <div class="form-group col-md-3">
                                    <label for="ap-address1" class="form-control-label"><strong>Block Lot</strong></label>
                                        <input type="text" id="ap-address1" name="prof_address1" placeholder="Block Number" class="col-sm-11 form-control ">
                                </div>
                                <div class="form-group col-md-3">
                                    <label for="ap-address2" class="form-control-label"><strong>Street</strong></label>
                                        <input type="text" id="ap-address2" name="prof_address2" placeholder="Street Name/Avenue/Road" class="col-sm-11 form-control ">
                                </div>   
                                <div class="form-group col-md-4">
                                    <label for="ap-cityname" class="form-control-label"><strong>City</strong></label>
                                        <input type="text" id="ap-cityname" name="prof_cityname" placeholder="City" class="col-sm-11 form-control ">
                                </div>
                                </div>   
                            </div>
                        </span>
                        //- END OF PROFESSIONAL BACKGROUND
            </div>
            //- END OF ADDITIONAL TABS(AS OF NOW PER DIV)    
                                            
            <div class="card-footer">
                <div style="overflow:auto;">
                    <div style="float:right;">
                        <button type="button" class="btn btn-outline-primary" id="prevBtn"  onclick="nextPrev(-1)">
                            <i class="fa fa-arrow-circle-left"></i>&nbsp; Previous</button>
                        <button type="button" class="btn btn-outline-primary" id="nextBtn"  onclick="nextPrev(1)">
                            <i class="fa fa-arrow-circle-right"></i>&nbsp; Next</button>
                    </div>
                </div>
            </div>
             <!-- Circles which indicates the steps of the form: -->
            <div style="text-align:center;margin-top:40px;">
            <span class="step"></span>
            <span class="step"></span>
            <span class="step"></span>
            </div>
        </form>
        </div>
    </div>
    </div>
    
    </div>
    //- SCRIPT FOR TABS
    script.
        var currentTab = 0; // Current tab is set to be the first tab (0)
        showTab(currentTab); // Display the current tab

        function showTab(n) {
        // This function will display the specified tab of the form ...
        var x = document.getElementsByClassName("tab");
        x[n].style.display = "block";
        // ... and fix the Previous/Next buttons:
        if (n == 0) {
            document.getElementById("prevBtn").style.display = "none";
        } else {
            document.getElementById("prevBtn").style.display = "inline";
        }
        if (n == (x.length - 1)) {
            document.getElementById("nextBtn").innerHTML = "Submit";
        } else {
            document.getElementById("nextBtn").innerHTML = "Next";
        }
        // ... and run a function that displays the correct step indicator:
        fixStepIndicator(n)
        }

        function nextPrev(n) {
        // This function will figure out which tab to display
        var x = document.getElementsByClassName("tab");
        // Exit the function if any field in the current tab is invalid:
        if (n == 1 && !validateForm()) return false;
        // Hide the current tab:
        x[currentTab].style.display = "none";
        // Increase or decrease the current tab by 1:
        currentTab = currentTab + n;
        // if you have reached the end of the form... :
        if (currentTab >= x.length) {
            //...the form gets submitted:
            document.getElementById("regForm").submit();
            return false;
        }
        // Otherwise, display the correct tab:
        showTab(currentTab);
        }

        function validateForm() {
        // This function deals with validation of the form fields
        var x, names,middle, a, b, valid = true;
        x = document.getElementsByClassName("tab");
        
        //- VALIDATE APPLICATION NAMES(FIRST, LAST)
        var noespchar = `[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]`;
        names = x[currentTab].getElementsByClassName("names");
        middle = x[currentTab].getElementsByClassName("middle");
        //- END VALIDATE APPLICATION NAMES
        
        // A loop that checks every input field in the current tab:

        //- NAMES(FIRST AND LAST)
        for (a = 0; a < names.length; a++) {
            // If a field is empty...
            if (names[a].value == "" || names[a].value == noespchar ||  names[a].value == " ") {
            console.log("INVALID NAMES(FIRST AND LAST)")
            // add an "invalid" class to the field:
            names[a].className += "invalid";
            // and set the current valid status to false:
            valid = false;
            }
        }
        //- END OF NAMES(FIRST AND LAST)
        //- NAME(MIDDLE NAME)
        for (b = 0; b < middle.length; b++) {
            // If a field is empty...
            if (middle[b].value == noespchar ||  middle[b].value == " ") {
            console.log("INVALID NAME(MIDDLE)")
            // add an "invalid" class to the field:
            middle[b].className += "invalid";
            // and set the current valid status to false:
            valid = false;
            }
        }
        //- END OF NAMES(MIDDLENAME)


        // If the valid status is true, mark the step as finished and valid:
        if (valid) {
            document.getElementsByClassName("step")[currentTab].className += " finish";
        }
        return valid; // return the valid status
        }

        function fixStepIndicator(n) {
        // This function removes the "active" class of all steps...
        var i, x = document.getElementsByClassName("step");
        for (i = 0; i < x.length; i++) {
            x[i].className = x[i].className.replace(" active", "");
        }
        //... and adds the "active" class to the current step:
        x[n].className += " active";
        }


        //- SCRIPT FOR LABEL
        (function ($) {
            $.fn.floatLabels = function (options) {

                // Settings
                var self = this;
                var settings = $.extend({}, options);


                // Event Handlers
                function registerEventHandlers() {
                    self.on('input keyup change', 'input, textarea', function () {
                        actions.swapLabels(this);
                    });
                }


                // Actions
                var actions = {
                    initialize: function() {
                        self.each(function () {
                            var $this = $(this);
                            var $label = $this.children('label');
                            var $field = $this.find('input,textarea').first();

                            if ($this.children().first().is('label')) {
                                $this.children().first().remove();
                                $this.append($label);
                            }

                            var placeholderText = ($field.attr('placeholder') && $field.attr('placeholder') != $label.text()) ? $field.attr('placeholder') : $label.text();

                            $label.data('placeholder-text', placeholderText);
                            $label.data('original-text', $label.text());

                            if ($field.val() == '') {
                                $field.addClass('empty')
                            }
                        });
                    },
                    swapLabels: function (field) {
                        var $field = $(field);
                        var $label = $(field).siblings('label').first();
                        var isEmpty = Boolean($field.val());

                        if (isEmpty) {
                            $field.removeClass('empty');
                            $label.text($label.data('original-text'));
                        }
                        else {
                            $field.addClass('empty');
                            $label.text($label.data('placeholder-text'));
                        }
                    }
                }


                // Initialization
                function init() {
                    registerEventHandlers();

                    actions.initialize();
                    self.each(function () {
                        actions.swapLabels($(this).find('input,textarea').first());
                    });
                }
                init();


                return this;
            };

            $(function () {
                $('.float-label-control').floatLabels();
            });
        })(jQuery);

        //- END OF SCRIPT FOR LABEL


        